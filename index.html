<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva de Ã”nibus - Trilheiros de RondonÃ³polis</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to bottom, #a8e6cf, #dcedc1);
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  h1 {
    font-size: 2.2em;
    color: #2e7d32;
    margin-bottom: 10px;
  }
  h2 {
    color: #388e3c;
    margin-top: 0;
  }
  .contador {
    font-size: 1.2em;
    background: #fff;
    display: inline-block;
    padding: 10px 25px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }
  form {
    background: #fff;
    padding: 20px;
    border-radius: 15px;
    max-width: 400px;
    margin: 0 auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }
  input, button {
    width: 90%;
    padding: 10px;
    margin-top: 10px;
    font-size: 1em;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    background: #2e7d32;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  button:hover {
    background: #1b5e20;
  }
  .pix {
    margin-top: 20px;
    font-size: 1.1em;
    background: #fff;
    padding: 10px;
    border-radius: 10px;
  }
</style>
</head>
<body>

<h1>Reserva de Ã”nibus</h1>
<h2>Trilheiros de RondonÃ³polis</h2>

<div class="contador" id="contador">
  Carregando vagas...
</div>

<form id="reservaForm">
  <label>Nome completo:</label><br>
  <input type="text" id="nome" required><br>

  <label>Quantidade de vagas:</label><br>
  <input type="number" id="vagas" min="1" max="10" required><br>

  <button type="button" onclick="enviarReserva()">Confirmar e Enviar no WhatsApp</button>
</form>

<div class="pix">
  <p>ðŸ’³ Valor por pessoa: <b>R$ 68,00</b></p>
  <p>ðŸ”‘ Chave Pix: <b>trilheiros.roomt@gmail.com</b> <button onclick="copiarPix()">Copiar</button></p>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzt8E7M3UHirzIVm2Y-GIkqs8G7tJP_ltJ-DxNiBT55pmdyDtu2Fjaq3gxpDag2LWt2Lw/exec";
const limite = 45;
const numeroWhatsApp = "5566996926174";

function atualizarContador() {
  fetch(scriptURL)
    .then(r => r.json())
    .then(d => {
      if (d.total >= limite) {
        document.getElementById("contador").innerHTML = "ðŸš« Vagas lotadas! Entre em contato via WhatsApp para verificar nova turma.";
        document.getElementById("reservaForm").style.display = "none";
      } else {
        const vagasRestantes = limite - d.total;
        document.getElementById("contador").innerHTML = `âœ… Vagas preenchidas: ${d.total} | Vagas disponÃ­veis: ${vagasRestantes}`;
      }
    })
    .catch(() => {
      document.getElementById("contador").innerHTML = "Erro ao carregar contador.";
    });
}

function enviarReserva() {
  const nome = document.getElementById("nome").value.trim();
  const vagas = parseInt(document.getElementById("vagas").value);
  if (!nome || !vagas) {
    alert("Preencha seu nome e a quantidade de vagas.");
    return;
  }

  fetch(scriptURL + `?nome=${encodeURIComponent(nome)}&vagas=${vagas}`)
    .then(r => r.text())
    .then(() => {
      const valorTotal = vagas * 68;
      const msg = `OlÃ¡, segue minha reserva.%0A%0ANome: ${nome}%0AQuantidade de vagas: ${vagas}%0AValor total: R$ ${valorTotal},00%0AComprovante em anexo.`;
      window.open(`https://wa.me/${numeroWhatsApp}?text=${msg}`, "_blank");
      atualizarContador();
    });
}

function copiarPix() {
  navigator.clipboard.writeText("trilheiros.roomt@gmail.com");
  alert("Chave Pix copiada!");
}

atualizarContador();
</script>

</body>
</html>

